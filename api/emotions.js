const emotionDiary = [
  {
    id: "2",
    title: "평범하지만 바쁜 하루",
    mood: "so-so",
    name: "장진혁",
    createdAt: "2025-10-10",
    content: "업무가 몰려와 정신없이 처리하다 보니 하루가 금세 지나갔다.",
  },
  {
    id: "3",
    title: "최악의 하루",
    mood: "awful",
    name: "장진혁",
    createdAt: "2025-10-14",
    content: "끝없는 업무와 스트레스 때문에 하루가 너무 힘들게 느껴졌다.",
  },
  {
    id: "4",
    title: "조금은 가라앉은 하루",
    mood: "so-so",
    name: "장진혁",
    createdAt: "2025-10-12",
    content: "마음이 살짝 무거워서 평소보다 기운이 덜했다.",
  },
  {
    id: "5",
    title: "우울했던 하루",
    mood: "bad",
    name: "장진혁",
    createdAt: "2025-10-09",
    content: "기분이 계속 가라앉아 하루 종일 활력이 없었다.",
  },
  {
    id: "6",
    title: "운수 좋은 날",
    mood: "very-good",
    name: "김정진",
    createdAt: "2025-10-01",
    content: "오늘은 친구들과 오랜만에 만나서 즐거운 시간을 보냈다.",
  },
  {
    id: "7",
    title: "운수 안 좋은 날",
    mood: "so-so",
    name: "고범석",
    createdAt: "2025-10-18",
    content: "업무가 많아서 정신없이 하루를 보냈다.",
  },
  {
    id: "8",
    title: "운수 안 좋은 날",
    mood: "awful",
    name: "송유경",
    createdAt: "2025-10-18",
    content: "업무가 많아서 정신없이 하루를 보냈다.",
  },
  {
    id: "9",
    title: "운수 안 좋은 날",
    mood: "good",
    name: "문수빈",
    createdAt: "2025-10-17",
    content: "오늘은 기분이 조금 다운됐다.",
  },
  {
    id: "10",
    title: "운수 안 좋은 날123",
    mood: "good",
    name: "장진혁",
    createdAt: "2025-10-21",
    content: "오늘은 기분이 조금 다운됐다.123",
  },
  {
    id: "11",
    title: "운수 안 좋은 날",
    mood: "bad",
    name: "장진혁",
    createdAt: "2025-10-21",
    content: "오늘은 기분이 조금 다운됐다.",
  },
  {
    id: "12",
    title: "운수 안 좋은 날",
    mood: "bad",
    name: "장진혁",
    createdAt: "2025-10-21",
    content: "오늘은 기분이 조금 다운됐다.",
  },
  {
    id: "13",
    title: "운수 안 좋은 날",
    mood: "bad",
    name: "장진혁",
    createdAt: "2025-10-21",
    content: "오늘은 기분이 조금 다운됐다.",
  },
  {
    id: "14",
    title: "운수 안 좋은 날",
    mood: "bad",
    name: "장진혁",
    createdAt: "2025-10-21",
    content: "오늘은 기분이 조금 다운됐다.",
  },
  {
    id: "16",
    title: "운수 안 좋은 날",
    mood: "bad",
    name: "장진혁",
    createdAt: "2025-10-21",
    content: "오늘은 기분이 조금 다운됐다.",
  },
  {
    id: "12",
    title: "운수 안 좋은 날9월",
    mood: "good",
    name: "장진혁",
    createdAt: "2025-09-07",
    content: "오늘은 기분이 조금 다운됐다.",
  },
  {
    id: "13",
    title: "9월운수 안 좋은 날",
    mood: "very-good",
    name: "장진혁",
    createdAt: "2025-09-11",
    content: "오늘은 기분이 조금 다운됐다.",
  },
  {
    id: "14",
    title: "운수 9월안 좋은 날",
    mood: "bad",
    name: "장진혁",
    createdAt: "2025-09-17",
    content: "오늘은 기분이 조금 다운됐다.",
  },
  {
    id: "15",
    title: "운수 안 좋9월은 날",
    mood: "so-so",
    name: "장진혁",
    createdAt: "2025-09-24",
    content: "오늘은 기분이 조금 다운됐다.",
  },
  {
    id: "16",
    title: "운수 안 9월좋은 날",
    mood: "awful",
    name: "장진혁",
    createdAt: "2025-09-21",
    content: "오늘은 기분이 조금 다운됐다.",
  },
    {
      id: "17",
      title: "가을 햇살 속 산책",
      mood: "so-so",
      name: "정연찬",
      createdAt: "2025-09-22",
      content: "오늘은 햇살이 따뜻해서 산책하기 딱 좋았다.",
    },
    {
      id: "18",
      title: "커피 한 잔의 여유",
      mood: "so-so",
      name: "정연찬",
      createdAt: "2025-09-23",
      content: "카페에서 마신 라떼가 마음을 편안하게 해줬다.",
    },
    {
      id: "19",
      title: "비 오는 날의 생각",
      mood: "good",
      name: "정연찬",
      createdAt: "2025-09-24",
      content: "빗소리를 들으며 지난 시간을 떠올렸다.",
    },
    {
      id: "20",
      title: "작은 성취의 기쁨",
      mood: "good",
      name: "정연찬",
      createdAt: "2025-09-25",
      content: "오늘 목표했던 일을 끝내서 뿌듯하다.",
    },
    {
      id: "21",
      title: "친구와의 저녁",
      mood: "good",
      name: "정연찬",
      createdAt: "2025-09-26",
      content: "오랜만에 친구와 웃으며 저녁을 함께했다.",
    },
    {
      id: "22",
      title: "조용한 독서 시간",
      mood: "very-good",
      name: "정연찬",
      createdAt: "2025-09-27",
      content: "책 속에서 잠시 현실을 잊을 수 있었다.",
    },
    {
      id: "23",
      title: "피곤한 하루",
      mood: "bad",
      name: "정연찬",
      createdAt: "2025-09-28",
      content: "오늘은 일이 많아 몸이 무겁게 느껴졌다.",
    },
    {
      id: "24",
      title: "새로운 도전",
      mood: "bad",
      name: "정연찬",
      createdAt: "2025-09-29",
      content: "새 프로젝트를 시작해서 기대된다.",
    },
    {
      id: "25",
      title: "가족과의 시간",
      mood: "very-good",
      name: "정연찬",
      createdAt: "2025-09-30",
      content: "가족과 함께 저녁을 먹으며 따뜻함을 느꼈다.",
    },
    {
      id: "26",
      title: "조금은 외로운 밤",
      mood: "very-good",
      name: "정연찬",
      createdAt: "2025-10-01",
      content: "밤이 깊어지니 혼자라는 생각이 들었다.",
    },
];

export default function handler(req, res) {
  if (req.method === "GET") {
    res.status(200).json(emotionDiary);
  } else if (req.method === "PATCH") {
    const { id } = req.query; // /api/emotions/[id] 라우트라면 req.query.id
    const { title, mood, content } = req.body;

    // 배열에서 해당 diary 찾기
    const index = emotionDiary.findIndex((d) => d.id === id);
    if (index === -1) {
      return res.status(404).json({ message: "일기를 찾을 수 없음" });
    }

    // 수정 반영
    emotionDiary[index] = {
      ...emotionDiary[index],
      title,
      mood,
      content,
    };

    return res.status(200).json(emotionDiary[index]);
  } else if (req.method === "DELETE") {
    const { id } = req.query;
    const index = emotionDiary.findIndex((d) => d.id === id);
    if (index === -1) {
      return res.status(404).json({ message: "일기를 찾을 수 없음" });
    }
    const deleted = emotionDiary[index];
    emotionDiary.splice(index, 1);
    return res.status(200).json({ id: deleted.id, message: "삭제되었습니다" });
  } else {
    res.status(405).json({ message: "허용되지 않는 메서드" });
  }
}
